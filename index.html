<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="content-type" content="text/html"  charset="utf-8">
<title>WichToGo</title>

<link href="css/jquery.mobile.structure-1.3.1.min.css" rel="stylesheet" type="text/css" />
<link href="css/jquery.mobile.theme-1.3.1.min.css" rel="stylesheet" type="text/css" />
<link href="css/layout.css" rel="stylesheet" type="text/css" />

<script src="js/cordova-2.6.0.js" type="text/javascript"></script>
<script src="js/jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="js/jquery.mobile-1.3.1.min.js" type="text/javascript"></script>

<script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3&sensor=false&language=en"></script>
</head>
<body>



<!-- MAIN PAGE -->
<div data-role="page" id="home" data-theme="c"> 
	<div data-role="header" data-backbtn="True">
		<h1>WichToGo Sandwiches</h1>
    </div>
    <div data-role="content" align="center" data-theme="e">
        <p style="font-family:'Snap ITC'; font-size:36px; ">WichToGo</p>
        <img src="images/S2.jpg" width="200" height="200" />
        <p style="font-family:Verdana, Geneva, sans-serif;font-size:12px;font-weight:bold">SUPER SONIC SANDWICHS </p> 
    	<p><a href="#location" data-role="button">LOCATION</a></p>
        <p><a href="#menu" data-role="button">MENU</a></p>        
       	<a href="https://www.facebook.com/"><img src="images/facebook.jpg"  width="32" height="32" alt="FaceBook" /></a>
        <a href="http://pinterest.com/"><img src="images/pinterest.jpg" width="32" height="32" alt="PInterest" /></a>
    </div>
    <div data-role="footer" align="center" data-position="fixed">
		<h3>WichToGo.com</h3>      	
    </div>
</div>




<!-- LOCATION PAGE -->
<div data-role="page" id="location" data-theme="c"> 
	<div data-role="header"  data-backbtn="True">
		<h1>WichToGo Sandwiches</h1>
    </div>
    <div data-role="content" align="center" data-theme="e">
        <div class="ui-bar-c ui-corner-all ui-shadow" style="padding:1em;">
            <div id="map_canvas" style="height:300px;width:100%;"></div>
            <div class="ui-bar-c ui-corner-all ui-shadow" style="padding:1em;">
                <div data-role="fieldcontain">
                    <label for="from">From</label> 
                   <!-- <input type="text" id="from" value="Longmont, Colorado"/> -->
				   <input type="text" id="from" required placeholder="Start Address"/>
                </div>
                <div data-role="fieldcontain">
                    <label for="to">To</label> 
                    <input type="text" id="to" value="2199 S University Blvd  Denver, CO 80208"/>
                </div>
                <div data-role="fieldcontain">
                    <label for="mode" class="select">Transportation method:</label>
                    <select name="select-choice-0" id="mode">
                    <option value="DRIVING">Driving</option>
                    <option value="WALKING">Walking</option>
                    <option value="BICYCLING">Bicycling</option>
                    </select>
                </div>
                <a data-icon="search" data-role="button" href="#" id="submitMap">Get directions</a>
                <div id="results" style="display:none;"></div>
                <div id="directions"></div>
            </div>
        </div>
    </div>
    <div data-role="footer" align="center" data-position="fixed">
		<h3>WichToGo.com</h3>      	
    </div>
</div>



<!-- MENU PAGE -->
<div data-role="page" id="menu" data-theme="c"> 
	<div data-role="header"  data-backbtn="True">
		<h1>WichToGo Sandwiches</h1>
    </div>
    <div data-role="content" align="center" data-theme="e">
        <div class="items" align="center" style="background-color:#C1C9BA">
        <FORM id="menuForm">
		<h2>BREAD</h2> 
            <input type="radio" name="bread" value="Wheat" id="Wheat" />
            <label for="Wheat">WHEAT</label><br />
            <input type="radio" name="bread" value="White" id="White" />
            <label for="White">WHITE</label><br />
            
        <h2>WHICH KIND</h2>  
            <input type="radio" name="kind" value="Veggie" id="Veggie" />
            <label for="Veggie">VEGGIE</label><br />
            <input type="radio" name="kind" value="Meat" id="Meat" />
            <label for="Meat">MEAT</label><br /> 
       <h2>TOPPINGS</h2>        
            <input type="checkbox" name="topping" value="Lettuce" id="Lettuce" />
            <label for="Lettuce">LETTUCE</label><br />
            <input type="checkbox" name="topping" value="Onion" id="Onion" />
            <label for="Onion">ONION</label><br />      
            <input type="checkbox" name="topping" value="Tomato" id="Tomato" />
            <label for="Tomato">TOMATO</label><br />     
            <input type="checkbox" name="topping" value="Chicken" id="Chicken" />
            <label for="Chicken">CHICKEN</label><br />     
            <input type="checkbox" name="topping" value="Turkey" id="Turkey" />
            <label for="Turkey">TURKEY</label><br />       
        </FORM>
        </div>
        <input type="button" id="proceed" onClick="setChoices()" value="PROCEED" />
		<a href="https://www.facebook.com/"><img src="images/facebook.jpg"  width="32" height="32" alt="FaceBook" /></a>
        <a href="http://pinterest.com/"><img src="images/pinterest.jpg" width="32" height="32" alt="PInterest" /></a>
    </div>
    <div data-role="footer" align="center" data-position="fixed">
		<h3>WichToGo.com</h3>      	
    </div>
</div>

<!-- PREVIEWMENU PAGE -->
<div data-role="page" id="previewMenu" data-theme="c"> 
	<div data-role="header"  data-backbtn="True">
		<h1>WichToGo Sandwiches</h1>
    </div>
    <div data-role="content" align="center" data-theme="e">
		<h1 id="previewMenu"></h1>
        <h1 id="kindMenu"></h1>
        <h1 id="toppingMenu"></h1>
		<input type="submit" name="submit" value="Place the Order" onClick="placeOrder()"/>
		<a href="https://www.facebook.com/"><img src="images/facebook.jpg"  width="32" height="32" alt="FaceBook" /></a>
        <a href="http://pinterest.com/"><img src="images/pinterest.jpg" width="32" height="32" alt="PInterest" /></a>		
    </div>
    <div data-role="footer" align="center" data-position="fixed">
		<h3>WichToGo.com</h3>      	
    </div>
</div>

<!-- PLACEORDER PAGE -->
<div data-role="page" id="placeOrder" data-theme="c"> 
	<div data-role="header"  data-backbtn="True">
		<h1>WichToGo Sandwiches</h1>
    </div>
    <div data-role="content" align="center" data-theme="e">
        <div class="items" align="center" style="background-color:#C1C9BA">
            <FORM id="orderForm">
                First Name: <input type="text" id="fname" name="name" autofocus="required"><br />
                Last Name: <input type="text" id="lname" name="name" required><br />
                Phone No: <input type="text" id="phno" name="name"  placeholder="Ex. 999-999-9999"pattern='\d{3}[\-]\d{3}[\-]\d{4}' required><br />
                <!--<video autoplay id="vid" style="display:none;"></video>
                <canvas id="canvas" width="200" height="200" style="border:1px solid #d3d3d3;"></canvas><br>
                <button onclick="snapshot()">Take Picture</button><br />-->
                <input type="submit" id="submitBtn" name="send" id="send" value="Submit">
            </FORM>
        </div>
		
		<div id="results" ></div>
		<a href="https://www.facebook.com/"><img src="images/facebook.jpg"  width="32" height="32" alt="FaceBook" /></a>
		<a href="http://pinterest.com/"><img src="images/pinterest.jpg" width="32" height="32" alt="PInterest" /></a>
    </div>
    <div data-role="footer" align="center" data-position="fixed">
		<h3>WichToGo.com</h3>      	
    </div>
</div>

<!-- THANK YOU PAGE -->
<div data-role="page" id="thanku" data-theme="c"> 
	<div data-role="header"  data-backbtn="True">
		<h1>WichToGo Sandwiches</h1>
    </div>
    <div data-role="content" align="center" data-theme="e">
		<h1>Thank  you for ordering sandwich</h1>
       
		
		<a href="https://www.facebook.com/"><img src="images/facebook.jpg"  width="32" height="32" alt="FaceBook" /></a>
        <a href="http://pinterest.com/"><img src="images/pinterest.jpg" width="32" height="32" alt="PInterest" /></a>		
    </div>
    <div data-role="footer" align="center" data-position="fixed">
		<h3>WichToGo.com</h3>      	
    </div>
</div>
    
<script type="text/javascript">
	
	// Bind actions to elements
    $(document).on("pageinit", "#location", function() {
        initialize();
    });

    $(document).on('click', '#submitMap', function(e) {
        e.preventDefault();
        calculateRoute();
    });
	
	
	// Bind actions to page loads
	$('#location').on('pageshow', function(event, ui){
		google.maps.event.trigger(map, 'resize');
	});
	
	$('#previewMenu').on('pageshow', function(event, ui){
		getBread();
	});
	
	$('#thanku').on('pageshow', function(event, ui){
		loadRecord(); 
	});
	
	
    // Mapping
    var directionsDisplay,
        directionsService = new google.maps.DirectionsService(),
        map;

    function initialize() 
    {
        directionsDisplay = new google.maps.DirectionsRenderer();
        var mapCenter = new google.maps.LatLng(39.646022, -105.078467);

        var myOptions = {
            zoom:10,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            center: mapCenter
        }

        map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
        directionsDisplay.setMap(map);
        directionsDisplay.setPanel(document.getElementById("directions"));  
    }

    function calculateRoute() 
    {
        var selectedMode = $("#mode").val(),
            start = $("#from").val(),
            end = $("#to").val();

        if(start == '' || end == '')
        {
            // cannot calculate route
            $("#results").hide();
            return;
        }
        else
        {
            var request = {
                origin:start, 
                destination:end,
                travelMode: google.maps.DirectionsTravelMode[selectedMode]
            };

            directionsService.route(request, function(response, status) {
                if (status == google.maps.DirectionsStatus.OK) {
                    directionsDisplay.setDirections(response); 
                    $("#results").show();
                    /*
                        var myRoute = response.routes[0].legs[0];
                        for (var i = 0; i < myRoute.steps.length; i++) {
                            alert(myRoute.steps[i].instructions);
                        }
                    */
                }
                else {
                    $("#results").hide();
                }
            });

        }
    }
		
	// Menu
	function setChoices(){
		//grab the values from teh selections and create key/value pairs for each
		var toppings =[];
		$("input[name='topping']:checked","#menuForm").each(function() {toppings.push($(this).val());});
		//var s1 = $("input[name='topping']:checked")
		window.localStorage.setItem("toppings", toppings);
		// et cetera - for al radio groups and check boxes
		// These are now in local storage and can be easily retrieved by your application in any view
		//console.log(window.localStorage.getItem("bread"));
		
		var s1 = $('input[name=bread]:checked', '#menuForm').val();
		window.localStorage.setItem("bread", s1);
		var s2 = $('input[name=kind]:checked', '#menuForm').val();
		window.localStorage.setItem("kind", s2);
		//console.log(window.localStorage.getItem("kind"));		
		$.mobile.changePage("#previewMenu");		
	}
	
	function getBread(){
		$("h1#previewMenu").html(window.localStorage.getItem("bread"));
		$("h1#kindMenu").html(window.localStorage.getItem("kind"));
		$("h1#toppingMenu").html(window.localStorage.getItem("toppings"));
	}
		
	function placeOrder(){	
		//window.location.href = "placeOrder.html";
		//window.location.href = "Test.html";
		$.mobile.changePage("#placeOrder");
	}

var createStatement = "CREATE TABLE IF NOT EXISTS userinfo (id INTEGER PRIMARY KEY AUTOINCREMENT, fname TEXT,lname TEXT, phno TEXT)"; 
var selectAllStatement = "SELECT * FROM userinfo"; 
var insertStatement = "INSERT INTO userinfo(fname,lname,phno) VALUES (?, ?, ?)";
var db = openDatabase("Customer", "1.0", "Customer", 200000);  // Open SQLite Database 
var dataset; 
var DataType;	

$(document).on("pageinit", "#placeOrder", function() {
        initDatabase();
    });

	function initDatabase()  // Function Call When Page is ready. 
{ 
    try { 
        if (!window.openDatabase)  // Check browser is supported SQLite or not. 
        { 
            alert('Databases are not supported in this browser.'); 
        } 
        else { 
            createTable();  // If supported then call Function for create table in SQLite 
        } 
    }
     catch (e) { 
        if (e == 2) { 
            // Version number mismatch.  
            console.log("Invalid database version."); 
        } else { 
            console.log("Unknown error " + e + "."); 
        } 
        return; 
    } 
}

function createTable()  // Function for Create Table in SQLite. 
{ 
    db.transaction(function (tx) { tx.executeSql(createStatement, [], showRecords, onError); }); 
}

function insertRecord() // Get value from Input and insert record . Function Call when Save/Submit Button Click.. 
{ 
        var fnametemp = $('input:text[id=fname]','#orderForm').val();
		var lnametemp = $('input:text[id=lname]','#orderForm').val();
		var phnotemp = $('input:text[id=phno]','#orderForm').val(); 
        var useremailtemp = $('input:text[id=useremail]').val();
        db.transaction(function (tx) { tx.executeSql(insertStatement, [fnametemp, lnametemp, phnotemp], loadResult, onError); }); 
		$.mobile.changePage("#thanku");
}

function loadRecord(i) // Function for display records which are retrived from database. 
{ 
    var item = dataset.item(i);
	$("#fname").val((item['fname']).toString());
    $("#lname").val((item['lname']).toString()); 
    $("#phno").val((item['phno']).toString()); 
    $("#id").val((item['id']).toString()); 
}

function loadResult() //Function for Load... 
{
    showRecords();

}

function onError(tx, error) // Function for Hendeling Error... 
{ 
    alert(error.message); 
}
 
function showRecords() // Function For Retrive data from Database Display records as list 
{ 
    $("#dbresults").html('') 
    db.transaction(function (tx) { 
        tx.executeSql(selectAllStatement, [], function (tx, result) { 
            dataset = result.rows; 
            for (var i = 0, item = null; i < dataset.length; i++) { 
                item = dataset.item(i); 
                var showres = '<li>' + item['fname'] + ' , ' + item['lname'] + ' , ' + item['phno'] ; 
                $("#dbresults").append(showres); 
				
            } 
        }); 
    }); 
}

 $(document).ready(function () // Call function when page is ready for load.. 
{ 
   // $("body").fadeIn(2000); // Fede In Effect when Page Load.. 
    initDatabase(); 
    $("#submitBtn").click(insertRecord);  // Register Event Listener when button click.  
		
});


	/*var video = document.querySelector("#vid");
    var canvas = document.querySelector('#canvas');
    var ctx = canvas.getContext('2d');
    var localMediaStream = null;

    var onCameraFail = function (e) {
        console.log('Camera did not work.', e);
    };

    function snapshot() {
        if (localMediaStream) {
            ctx.drawImage(video, 0, 0);
        }
    }

    navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;
    window.URL = window.URL || window.webkitURL;
    navigator.getUserMedia({video:true}, function (stream) {
        video.src = window.URL.createObjectURL(stream);
        localMediaStream = stream;
    }, onCameraFail);
*/

</script>



</body>
</html>
